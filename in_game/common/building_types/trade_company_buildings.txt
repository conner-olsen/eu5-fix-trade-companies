trade_company_headquarters_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	expensive = yes
	country_potential = {
		total_effective_building_levels:trade_company_headquarters < 1
		custom_tooltip = {
			text = building_trade_hq_only_one
			NOT = {
				has_variable = building_trade_hq
			}
		}
		num_relations_above_limit <= 0
	}
	location_potential = {
		OR = {
			ftc_is_recieving_rights = yes
			owner = {
				is_subject_of = scope:actor
			}
		}
	}
	allow = {
		market = {
			in_trade_range_of = scope:actor
		}
		scope:actor = {
			OR = {
				NOT = {
					has_variable_list = trade_company_regions
				}
				NOT = {
					is_target_in_variable_list = {
						name = trade_company_regions
						target = root.region
					}
				}
			}
		}
	}
	build_time = trade_company_build_time
	unique_production_methods = {
		trade_company_headquarters_requirements = {
			paper = 0.1
			category = building_maintenance
		}
	}
	modifier = {
		merchant_capacity_from_building = 0.2
		building_owner_maritime_presence = 0.02
		scaled_gold_to_building_owner = 0.2
		building_owner_overlord_maritime_presence = 0.05
		scaled_gold_to_building_owner_overlord = 0.5
		local_crown_estate_power = -0.2
		number_of_satellite_trade_buildings = 3
	}
	raw_modifier = {
		local_monthly_development = 0.01
		local_monthly_prosperity = 0.001
		local_build_buildings_cost = -0.1
	}
	custom_tags = {
		trade_company_building
	}
	on_construction_started = {
		owner = {
			set_variable = {
				name = building_trade_hq
				value = 1
			}
		}
	}
	on_construction_ended = {
		owner = {
			remove_variable = building_trade_hq
		}
	}
	on_built = {
		owner = {
			save_temporary_scope_as = builder
		}
		location = {
			construct_building = {
				building_type = building_type:trade_company_headquarters
				cost_multiplier = 0
				instant = yes
				cost_multiplier_reason = "game_concept_foreign_building"
				owner = scope:builder
			}
		}
	}
}

trade_company_headquarters = {
	is_foreign = yes
	max_levels = trade_company_headquarters_max_level
	pop_type = burghers
	category = tc_category
	employment_size = huge_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	expensive = yes
	build_time = trade_company_headquarters_time
	unique_production_methods = {
		trade_company_headquarters_requirements = {
			paper = 0.1
			category = building_maintenance
		}
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	modifier = {
		merchant_capacity_from_building = 0.2
		building_owner_maritime_presence = 0.02
		scaled_gold_to_building_owner = 0.2
		building_owner_overlord_maritime_presence = 0.05
		scaled_gold_to_building_owner_overlord = 0.5
		local_crown_estate_power = -0.2
		number_of_satellite_trade_buildings = 3
	}
	raw_modifier = {
		local_monthly_development = 0.01
		local_monthly_prosperity = 0.001
		local_build_buildings_cost = -0.1
	}
	custom_tags = {
		trade_company_building
	}
	on_construction_started = {
		owner = {
			set_variable = {
				name = building_trade_hq
				value = 1
			}
		}
	}
	on_construction_ended = {
		owner = {
			remove_variable = building_trade_hq
		}
	}
	on_built = {
		owner = {
			save_scope_as = overlord
		}
		location = {
			destroy_all_buildings_of_type = building_type:trade_company_headquarters_temp
			every_pop = {
				limit = {
					pop_type = pop_type:temp
				}
				destroy_pop = this
			}
			save_scope_as = capital
			create_building_country_in_location = {
				reforms = {
					banking_country
				}
				save_scope_as = trade_company_tag
				hidden_effect = {
					change_heir_selection = heir_selection:bank_selection
					change_government_type = government_type:republic
					make_subject_of = {
						target = scope:overlord
						type = subject_type:trade_company
					}
				}
			}
			if = {
				limit = {
					exists = scope:trade_company_tag
				}
				root = {
					change_building_owner = scope:trade_company_tag
				}
				scope:trade_company_tag = {
					set_capital = scope:capital
					set_variable = {
						name = trade_company_home_region
						value = scope:capital.region
					}
					if = {
						limit = {
							OR = {
								NOT = {
									has_variable_list = trade_company_regions
								}
								NOT = {
									is_target_in_variable_list = {
										name = trade_company_regions
										target = root.region
									}
								}
							}
						}
						add_to_variable_list = {
							name = trade_company_regions
							target = scope:capital.region
						}
					}
					research_advance = advance_type:trade_companies_advance
				}
			}
		}
		scope:overlord = {
			culture = {
				save_temporary_scope_as = overlord_culture
			}
			if = {
				limit = {
					exists = scope:capital
					exists = scope:trade_company_tag
					OR = {
						NOT = {
							has_variable_list = trade_company_regions
						}
						NOT = {
							is_target_in_variable_list = {
								name = trade_company_regions
								target = scope:capital.region
							}
						}
					}
				}
				add_to_variable_list = {
					name = trade_company_regions
					target = scope:capital.region
				}
				add_to_variable_list = {
					name = trade_company_subjects
					target = scope:trade_company_tag
				}
			}
			every_owned_foreign_building = {
				limit = {
					location = {
						region = scope:capital.region
					}
				}
				order_by = building_level
				change_building_owner = scope:trade_company_tag
			}
		}
		scope:trade_company_tag = {
			change_culture = scope:overlord_culture
		}
	}
}

trade_company_garrison_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_garrison
		}
	}
	country_potential = {
		OR = {
			total_effective_building_levels:trade_company_headquarters > 0
			any_subject = {
				total_effective_building_levels:trade_company_headquarters > 0
			}
		}
	}
	allow = {
		market = {
			in_trade_range_of = scope:actor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_defensive = 0.25
		local_garrison_size = 0.5
	}
	on_construction_started = {
		ftc_count_queue = {
			building_type = trade_company_garrison
		}
	}
	on_construction_ended = {
		ftc_temp_building_construction_ended = {
			building_type = trade_company_garrison
		}
	}
}

trade_company_garrison = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = burghers
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = large_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_garrison
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_defensive = 0.25
		local_garrison_size = 0.5
	}
	on_construction_started = {
		ftc_permanent_building_construction_started = yes
	}
	on_built = {
		ftc_built_perm = {
			building_type = trade_company_garrison
		}
	}
}

trade_company_harbor_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_harbor
		}
	}
	country_potential = {
		OR = {
			total_effective_building_levels:trade_company_headquarters > 0
			any_subject = {
				total_effective_building_levels:trade_company_headquarters > 0
			}
		}
	}
	allow = {
		is_port = yes
		market = {
			in_trade_range_of = scope:actor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		merchant_power_from_building = 0.5
		building_owner_maritime_presence = 0.01
		building_owner_overlord_maritime_presence = 0.02
	}
	on_construction_started = {
		ftc_count_queue = {
			building_type = trade_company_harbor
		}
	}
	on_construction_ended = {
		ftc_temp_building_construction_ended = {
			building_type = trade_company_garrison
		}
	}
}

trade_company_harbor = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = burghers
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = large_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_harbor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		merchant_power_from_building = 0.5
		building_owner_maritime_presence = 0.01
		building_owner_overlord_maritime_presence = 0.02
	}
	on_construction_started = {
		ftc_permanent_building_construction_started = yes
	}
	on_built = {
		ftc_built_perm = {
			building_type = trade_company_harbor
		}
	}
}

trade_company_local_venture_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_local_venture
		}
	}
	country_potential = {
		OR = {
			total_effective_building_levels:trade_company_headquarters > 0
			any_subject = {
				total_effective_building_levels:trade_company_headquarters > 0
			}
		}
	}
	allow = {
		market = {
			in_trade_range_of = scope:actor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_raw_material_output = 0.33
	}
	on_construction_started = {
		ftc_count_queue = {
			building_type = trade_company_local_venture
		}
	}
	on_construction_ended = {
		ftc_temp_building_construction_ended = {
			building_type = trade_company_harbor
		}
	}
}

trade_company_local_venture = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = burghers
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = large_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_local_venture
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_raw_material_output = 0.33
	}
	on_construction_started = {
		ftc_permanent_building_construction_started = yes
	}
	on_built = {
		ftc_built_perm = {
			building_type = trade_company_local_venture
		}
	}
}

trade_company_foreign_influence_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_foreign_influence
		}
	}
	country_potential = {
		OR = {
			total_effective_building_levels:trade_company_headquarters > 0
			any_subject = {
				total_effective_building_levels:trade_company_headquarters > 0
			}
		}
	}
	allow = {
		market = {
			in_trade_range_of = scope:actor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_monthly_development = 0.005
		local_max_control = 0.05
	}
	on_construction_started = {
		ftc_count_queue = {
			building_type = trade_company_foreign_influence
		}
	}
	on_construction_ended = {
		ftc_temp_building_construction_ended = {
			building_type = trade_company_foreign_influence
		}
	}
}

trade_company_foreign_influence = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = burghers
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = large_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_foreign_influence
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		local_monthly_development = 0.005
		local_max_control = 0.05
	}
	on_construction_started = {
		ftc_permanent_building_construction_started = yes
	}
	on_built = {
		ftc_built_perm = {
			building_type = trade_company_foreign_influence
		}
	}
}

trade_company_governance_temp = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = temp
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = 0
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_governance
		}
	}
	country_potential = {
		OR = {
			total_effective_building_levels:trade_company_headquarters > 0
			any_subject = {
				total_effective_building_levels:trade_company_headquarters > 0
			}
		}
	}
	allow = {
		market = {
			in_trade_range_of = scope:actor
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		manpower_to_building_owner = 0.003
		sailors_to_building_owner = 0.005
		can_recruit_regiment_in_this_location = yes
	}
	on_construction_started = {
		ftc_count_queue = {
			building_type = trade_company_governance
		}
	}
	on_construction_ended = {
		ftc_temp_building_construction_ended = {
			building_type = trade_company_governance
		}
	}
}

trade_company_governance = {
	is_foreign = yes
	max_levels = trade_company_building_max_level
	pop_type = burghers
	category = tc_category
	AI_ignore_available_worker_flag = yes
	important_for_AI = yes
	employment_size = large_foreign_trade_employment
	rural_settlement = yes
	town = yes
	city = yes
	build_time = trade_company_build_time
	possible_production_methods = {
		satellite_trade_building_requirements
	}
	country_potential = {
		ftc_hide_permanent_buildings_country_potential = yes
	}
	location_potential = {
		ftc_company_building_location_potential = {
			building_type = trade_company_governance
		}
	}
	custom_tags = {
		trade_company_building
		satellite_trade_building
	}
	modifier = {
		manpower_to_building_owner = 0.003
		sailors_to_building_owner = 0.005
		can_recruit_regiment_in_this_location = yes
	}
	on_construction_started = {
		ftc_permanent_building_construction_started = yes
	}
	on_built = {
		ftc_built_perm = {
			building_type = trade_company_governance
		}
	}
}
